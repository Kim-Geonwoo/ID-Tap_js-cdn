document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("serviceModal");const e=document.getElementById("openModalBtn");const n=document.getElementById("closeModalBtn");e.addEventListener("click",e=>{e.preventDefault();t.style.display="block"});n.addEventListener("click",()=>{t.style.display="none"});window.addEventListener("click",e=>{if(e.target===t){t.style.display="none"}})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".service-card");e.forEach(e=>{const n=e.dataset.serviceUuid;const o=e.querySelector(`#public-url-${n}`);const s=e.querySelector(`[data-preview-link-${n}]`);async function t(){if(!n){console.error("서비스 UUID가 없습니다.");return}try{const e=await fetch(`/get_service_url/${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});const t=await e.json();if(t.success){if(o)o.value=t.public_url;if(s)s.href=t.preview_url}else{console.error("URL 가져오기 실패:",t.message)}}catch(e){console.error("URL 요청 중 오류:",e)}}t()});function t(e){const t=document.getElementById(e);t.select();t.setSelectionRange(0,99999);navigator.clipboard.writeText(t.value).then(()=>{alert("링크가 복사되었습니다.")}).catch(e=>{console.error("복사 실패:",e);alert("링크 복사에 실패했습니다.")})}function n(e){const t=encodeURIComponent("내 프로필 링크 공유");const n=encodeURIComponent(e);window.location.href=`mailto:?subject=${t}&body=${n}`}function o(e){const t=encodeURIComponent(`내 프로필을 확인해보세요: ${e}`);window.open(`https://wa.me/?text=${t}`,"_blank")}window.copyToClipboard=t;window.shareViaEmail=n;window.shareViaWhatsApp=o});document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("limitInfoModal");const e=document.getElementById("limitInfoBtn");const n=document.getElementById("closeLimitModalBtn");e.addEventListener("click",()=>{t.style.display="block"});n.addEventListener("click",()=>{t.style.display="none"});window.addEventListener("click",e=>{if(e.target===t){t.style.display="none"}});const o=document.querySelectorAll(".deploy-btn");const s=document.querySelectorAll(".delete-deploy-btn");o.forEach(e=>{if(e.hasAttribute("disabled")){e.classList.add("btn-secondary");e.classList.remove("btn-primary")}});s.forEach(e=>{if(e.hasAttribute("disabled")){e.classList.add("btn-outline-secondary");e.classList.remove("btn-danger")}})});document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("loadingOverlay");const e=document.querySelectorAll("form");e.forEach(e=>{e.addEventListener("submit",function(e){if(this.classList.contains("loading")){e.preventDefault();return}const t=this.querySelector('button[type="submit"]');if(t){t.classList.add("loading")}n.style.display="flex";setTimeout(()=>{n.style.display="none";if(t){t.classList.remove("loading")}},3e4)})});const t=document.getElementById("serviceModal");if(t){const s=t.querySelector("form");if(s){s.addEventListener("submit",function(e){if(this.classList.contains("loading")){e.preventDefault();return}const t=this.querySelector('button[type="submit"]');if(t){t.classList.add("loading")}n.style.display="flex";setTimeout(()=>{n.style.display="none";if(t){t.classList.remove("loading")}},3e4)})}}const o=window.fetch;window.fetch=function(){n.style.display="flex";return o.apply(this,arguments).finally(()=>{n.style.display="none"})}});